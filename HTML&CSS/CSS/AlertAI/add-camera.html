<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="shortcut icon" href="img/alert-logo.jpg">
   
    <script src="https://kit.fontawesome.com/e8af35a10c.js" crossorigin="anonym ous"></script>
   
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">

    <title>Alert AI</title>
</head>
<body>
    <section class="add-camera">

        <div class="add-camera-popup">
            <i class="fa-solid fa-xmark add-camera-popup-icon" id="close-camera-popup"></i>

            <div class="add-camera-popup-container-map">
                <input type="text" placeholder="Enter the ubication" class="add-camera-popup-map-input" id="place_input" >
                <button class="add-camera-popup-map-buttton">Register</button>
                <div id="map" class="add-camera-popup-map"></div>
            </div>


        </div>

        <form action="POST" class="add-camera-form">

            <div class="add-camera-form-left-side">
            
                <h1 class="add-camera-form-title">Camera Information</h1>

                <i class="fa-solid fa-pencil add-camera-icon"></i>
                <input type="text" placeholder="Camera Name" class="add-camera-input">

                <i class="fa-solid fa-phone add-camera-icon"></i>
                <input type="number"  placeholder="Phone Number" class="add-camera-input" maxlength="10">

                <i class="fa-solid fa-location-dot add-camera-icon"></i>
                <input type="text" placeholder="Location Camera" class="add-camera-input">

            </div>
            
            <div class="add-camera-form-right-side">

                <h1 class="add-camera-form-title">Camera Configuration</h1>

                <div class="add-camera-type">
                    <h3 class="add-camera-type-camera-question">What type of camera do you want to enter?</h3>
                        <label class="add-camera-type-camera-selection">
                            <input type="radio" name="option" value="WebCamera" id="WebCamera"> Web Camera
                        </label>
                        <label class="add-camera-type-camera-selection">
                            <input type="radio" name="option" value="SecurityCamera" id="SecurityCamera"> Security Camera 
                        </label>
                </div>
                <input type="text" placeholder="IP Address" class="add-camera-input" >

                
                <select class="add-camera-alert-select" id="place-select">
                    <option value="Personalized">Personalized</option>
                    <option value="Home">Home</option>
                    <option value="Square">Square</option>
                    <option value="Street">Street</option>
                    <option value="Building">Building</option>
                </select>
            
                <h2 class="add-camera-type-camera-question" id="personalized-alert-title">Types of alerts you would like to be notified of</h2>
            
                <div class="add-camera-alerts" id="personalized-alert">
                   
                <label class="add-camera-alert-container">
                    <h3 class="add-camera-alert-name">Fires</h3> 
                    <i class="fa-solid fa-house-fire add-camera-icon-alert"></i>
                    <input type="checkbox" class="add-camera-checkbox-alert">
                </label>
                


                <label class="add-camera-alert-container">
                    <h3 class="add-camera-alert-name">Knives</h3>
                    <i class="fa-solid fa-wand-sparkles add-camera-icon-alert"></i>
                    <input type="checkbox">
                </label>



                <label class="add-camera-alert-container">
                    <h3 class="add-camera-alert-name">Short Weapons</h3>
                    <i class="fa-solid fa-gun add-camera-icon-alert"></i>
                    <input type="checkbox">
                </label>


                <label class="add-camera-alert-container">
                    <h3 class="add-camera-alert-name">Long Weapons</h3>
                    <i class="fa-solid fa-gun add-camera-icon-alert"></i>
                    <input type="checkbox">
                </label>

                <label class="add-camera-alert-container">
                    <h3 class="add-camera-alert-name">Cannoning</h3>
                    <i class="fa-solid fa-people-robbery add-camera-icon-alert"></i>
                    <input type="checkbox">
                </label>

                <label class="add-camera-alert-container">
                    <h3 class="add-camera-alert-name">Crashes</h3>
                    <i class="fa-solid fa-car-burst add-camera-icon-alert"></i>
                    <input type="checkbox">                
                </label>

                <label class="add-camera-alert-container">
                    <h3 class="add-camera-alert-name">Dog Atack</h3>
                    <i class="fa-solid fa-paw add-camera-icon-alert"></i>
                    <input type="checkbox">
                </label>

                <label class="add-camera-alert-container">                  
                    <h3 class="add-camera-alert-name">Fights</h3>
                    <i class="fa-solid fa-user-ninja add-camera-icon-alert"></i>
                    <input type="checkbox">               
                </label>

                <label class="add-camera-alert-container">                    
                    <h3 class="add-camera-alert-name">Injured People</h3>
                    <i class="fa-solid fa-person-falling-burst add-camera-icon-alert"></i>
                    <input type="checkbox">                   
                </label>
            </div> 
            
            <div class="add-camera-form-bottom-side">
                <buttom class="add-camera-form-button">
                    Save
                    <!-- Maybe I can set an icon here, and when the user do hover this icon could move -->
                </buttom>
            </div>

        </form>

    </section>
    <!-- <script src="js/googleMap.js"></script>
    <script async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCHOslXEWFjWLvxr2EPcxER3QC44_T1sgY&libraries=places&callback=initMap"></script> -->
    <script>
        const argCoords = {lat:  19.42847, lng: -99.12766}
        const mapDiv = document.getElementById("map");
        const input = document.getElementById("place_input")
        let map;
        let marker;
        let autoComplete;

        function initMap(){
            
            map = new google.maps.Map(mapDiv, {
                center: argCoords,
                zoom: 10,
            });
            
            marker = new google.maps.Marker({
                map: map,
            });

            map.addListener('click', function(event) {
                
                const newLocation = event.latLng;
                marker.setPosition(newLocation)


                const geoCoder = new google.maps.Geocoder();
                geoCoder.geocode({ location: newLocation }, function(results, status) {
                    if (status == "OK") {
                        if (results[0]) {
                            const newAddress = results[0].formatted_address;
                            input.value = newAddress
                        }
                    }
                });

            });

            initAutoComplete();
        }

        function initAutoComplete() {

            autoComplete = new google.maps.places.Autocomplete(input);

            autoComplete.addListener("place_changed", function() {
                const place = autoComplete.getPlace();
                map.setCenter(place.geometry.location);
                marker.setPosition(place.geometry.location)
            }); // Elemento que se activa cuando cambiamos de lugar
        }

    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const locationInput = document.querySelector('.add-camera-input[placeholder="Location Camera"]');
            const ipInput =  document.querySelector('.add-camera-input[placeholder="IP Address"]');
            const popup = document.querySelector('.add-camera-popup');
            const closeButton = popup.querySelector('.add-camera-popup-icon');
            const mapInput = popup.querySelector('.add-camera-popup-map-input');
            const confirmButton = popup.querySelector('.add-camera-popup-map-buttton');
            const securityCameraOption = document.getElementById("SecurityCamera");
            const webCameraOption = document.getElementById("WebCamera");
    
            const placeSelect = document.getElementById('place-select');
            const personalizedAlert = document.getElementById('personalized-alert');
            const personalizedAlertTitle = document.getElementById('personalized-alert-title');
    
    
    
            popup.style.display = 'none';
    
            ipInput.style.display = 'none';
        
            // Alerts
            placeSelect.addEventListener('change', function() {
                if (this.value == "Personalized") {
                    personalizedAlert.style.display = "flex";
                    personalizedAlertTitle.style.display = "flex"
                } else {
                    personalizedAlert.style.display = "none";
                    personalizedAlertTitle.style.display = "none"
                }
            }); 
    
    
    
            // Mostrar popup cuando se hace clic en el input de ubicación
            locationInput.addEventListener('click', function() {
                popup.style.display = 'flex';
            });
        
            // Ocultar popup cuando se hace clic en el botón de cierre
            closeButton.addEventListener('click', function() {
                popup.style.display = 'none';
            });
        
            // Ocultar popup cuando se hace clic fuera de él
            window.addEventListener('click', function(event) {
                if (event.target !== popup && !popup.contains(event.target) && event.target !== locationInput) {
                    popup.style.display = 'none';
                }
            });
        
            // Poner la informacion de el input del mapa en el input de register camera
            confirmButton.addEventListener("click", function() {
                locationInput.value = mapInput.value;
                popup.style.display = 'none';
            });
    
            // Mostrar campo de IP y icono cuando se selecciona la opción "SecurityCamera"
            securityCameraOption.addEventListener('change', function() {
                ipInput.style.display = 'flex';
            });
    
            webCameraOption.addEventListener('change', function() {
                ipInput.style.display = 'none';
                ipInput.value = "";
            });
        });
    </script>
</body>